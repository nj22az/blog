var e,t,r,n,s,i,o,a,c,u,h,l,d,p,f,g,y,m,w,b,v,I,$,E,j,O,_,x,k,M,P,A,S,T=Object.defineProperty,D=e=>{throw TypeError(e)},C=(e,t,r)=>((e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r),q=(e,t,r)=>t.has(e)||D("Cannot "+r),U=(e,t,r)=>(q(e,t,"read from private field"),r?r.call(e):t.get(e)),W=(e,t,r)=>t.has(e)?D("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),R=(e,t,r,n)=>(q(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{p as L,P as N,x as V,E as z,S as H,A as B,O as J,d as G,m as F,s as Q,l as K,f as Y,t as X,a as Z,b as ee,c as te,e as re,g as ne,h as se,i as ie,o as oe,j as ae,k as ce,n as ue,q as he,r as le,u as de,v as pe,w as fe}from"./vendor-Bw2QHSYF.js";function ge(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var ye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function me(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const we={},be=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=e?.nonce||e?.getAttribute("nonce");n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/theofficeofnilsjohansson/"+e}(e))in we)return;we[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,r&&s.setAttribute("nonce",r),document.head.appendChild(s),t?new Promise((t,r)=>{s.addEventListener("load",t),s.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};function ve(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}var Ie={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},$e={0:8203,1:8204,2:8205,3:65279},Ee=new Array(4).fill(String.fromCodePoint($e[0])).join("");function je(e,t,r="auto"){return!0===r||"auto"===r&&(function(e){return!(!Number.isNaN(Number(e))||/[a-z]/i.test(e)&&!/\d+(?:[-:\/]\d+){2}(?:T\d+(?:[-:\/]\d+){1,2}(\.\d+)?Z?)?/.test(e)||!Date.parse(e))}(e)||function(e){try{new URL(e,e.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}(e))?e:`${e}${function(e){let t=JSON.stringify(e);return`${Ee}${Array.from(t).map(e=>{let r=e.charCodeAt(0);if(r>255)throw new Error(`Only ASCII edit info can be encoded. Error attempting to encode ${t} on character ${e} (${r})`);return Array.from(r.toString(4).padStart(4,"0")).map(e=>String.fromCodePoint($e[e])).join("")}).join("")}`}(t)}`}Object.fromEntries(Object.entries($e).map(e=>e.reverse())),Object.fromEntries(Object.entries(Ie).map(e=>e.reverse()));var Oe=`${Object.values(Ie).map(e=>`\\u{${e.toString(16)}}`).join("")}`,_e=new RegExp(`[${Oe}]{4,}`,"gu");function xe(e){return e&&JSON.parse(function(e){var t;return{cleaned:e.replace(_e,""),encoded:(null==(t=e.match(_e))?void 0:t[0])||""}}(JSON.stringify(e)).cleaned)}const ke=".",Me=`drafts${ke}`,Pe=`versions${ke}`;function Ae(e){return e.startsWith(Me)}function Se(e){return e.startsWith(Pe)}function Te(e,t){if("drafts"===t||"published"===t)throw new Error('Version can not be "published" or "drafts"');return`${Pe}${t}${ke}${Ce(e)}`}function De(e){if(!Se(e))return;const[t,r,...n]=e.split(ke);return r}function Ce(e){return Se(e)?e.split(ke).slice(2).join(ke):Ae(e)?e.slice(Me.length):e}const qe=/\r\n|[\n\r\u2028\u2029]/;function Ue(e,t,r){const n=e.split(qe),s={start:We(t.start,n),end:t.end?We(t.end,n):void 0},{start:i,end:o,markerLines:a}=function(e,t){const r={...e.start},n={...r,...e.end},s=2,i=3,o=r.line??-1,a=r.column??0,c=n.line,u=n.column;let h=Math.max(o-(s+1),0),l=Math.min(t.length,c+i);-1===o&&(h=0),-1===c&&(l=t.length);const d=c-o,p={};if(d)for(let f=0;f<=d;f++){const e=f+o;if(a)if(0===f){const r=t[e-1].length;p[e]=[a,r-a+1]}else if(f===d)p[e]=[0,u];else{const r=t[e-f].length;p[e]=[0,r]}else p[e]=!0}else p[o]=a===u?!a||[a,0]:[a,u-a];return{start:h,end:l,markerLines:p}}(s,n),c=`${o}`.length;return e.split(qe,o).slice(i,o).map((e,t)=>{const n=i+1+t,s=` ${` ${n}`.slice(-c)} |`,o=a[n],u=!a[n+1];if(!o)return` ${s}${e.length>0?` ${e}`:""}`;let h="";if(Array.isArray(o)){const t=e.slice(0,Math.max(o[0]-1,0)).replace(/[^\t]/g," "),n=o[1]||1;h=["\n ",s.replace(/\d/g," ")," ",t,"^".repeat(n)].join(""),u&&r&&(h+=" "+r)}return[">",s,e.length>0?` ${e}`:"",h].join("")}).join("\n")}function We(e,t){let r=0;for(let n=0;n<t.length;n++){const s=t[n].length+1;if(r+s>e)return{line:n+1,column:e-r};r+=s}return{line:t.length,column:t[t.length-1]?.length??0}}class Re extends Error{constructor(e,t){const r=Ne(e,t);super(r.message),C(this,"response"),C(this,"statusCode",400),C(this,"responseBody"),C(this,"details"),Object.assign(this,r)}}class Le extends Error{constructor(e){const t=Ne(e);super(t.message),C(this,"response"),C(this,"statusCode",500),C(this,"responseBody"),C(this,"details"),Object.assign(this,t)}}function Ne(e,t){const r=e.body,n={response:e,statusCode:e.statusCode,responseBody:Be(r,e),message:"",details:void 0};if(!ve(r))return n.message=He(e,r),n;const s=r.error;if("string"==typeof s&&"string"==typeof r.message)return n.message=`${s} - ${r.message}`,n;if("object"!=typeof s||null===s)return"string"==typeof s?n.message=s:"string"==typeof r.message?n.message=r.message:n.message=He(e,r),n;if(function(e){return"type"in e&&"mutationError"===e.type&&"description"in e&&"string"==typeof e.description}(s)||function(e){return"type"in e&&"actionError"===e.type&&"description"in e&&"string"==typeof e.description}(s)){const e=s.items||[],t=e.slice(0,5).map(e=>e.error?.description).filter(Boolean);let i=t.length?`:\n- ${t.join("\n- ")}`:"";return e.length>5&&(i+=`\n...and ${e.length-5} more`),n.message=`${s.description}${i}`,n.details=r.error,n}if(Ve(s)){const e=t?.options?.query?.tag;return n.message=ze(s,e),n.details=r.error,n}return"description"in s&&"string"==typeof s.description?(n.message=s.description,n.details=s,n):(n.message=He(e,r),n)}function Ve(e){return ve(e)&&"queryParseError"===e.type&&"string"==typeof e.query&&"number"==typeof e.start&&"number"==typeof e.end}function ze(e,t){const{query:r,start:n,end:s,description:i}=e;if(!r||typeof n>"u")return`GROQ query parse error: ${i}`;const o=t?`\n\nTag: ${t}`:"";return`GROQ query parse error:\n${Ue(r,{start:n,end:s},i)}${o}`}function He(e,t){const r="string"==typeof t?` (${s=t,i=100,s.length>i?`${s.slice(0,i)}â€¦`:s})`:"",n=e.statusMessage?` ${e.statusMessage}`:"";var s,i;return`${e.method}-request to ${e.url} resulted in HTTP ${e.statusCode}${n}${r}`}function Be(e,t){return-1!==(t.headers["content-type"]||"").toLowerCase().indexOf("application/json")?JSON.stringify(e,null,2):e}class Je extends Error{constructor({projectId:e}){super("CorsOriginError"),C(this,"projectId"),C(this,"addOriginUrl"),this.name="CorsOriginError",this.projectId=e;const t=new URL(`https://sanity.io/manage/project/${e}/api`);if(typeof location<"u"){const{origin:e}=location;t.searchParams.set("cors","add"),t.searchParams.set("origin",e),this.addOriginUrl=t,this.message=`The current origin is not allowed to connect to the Live Content API. Add it here: ${t}`}else this.message=`The current origin is not allowed to connect to the Live Content API. Change your configuration here: ${t}`}}const Ge={onResponse:(e,t)=>{if(e.statusCode>=500)throw new Le(e);if(e.statusCode>=400)throw new Re(e,t);return e}};function Fe(){const e={};return{onResponse:t=>{const r=t.headers["x-sanity-warning"],n=Array.isArray(r)?r:[r];for(const s of n)!s||e[s]||(e[s]=!0);return t}}}function Qe(e){return L([N({shouldRetry:Ke}),...e,Fe(),V(),z(),H(),Ge,B({implementation:J})])}function Ke(e,t,r){if(0===r.maxRetries)return!1;const n="GET"===r.method||"HEAD"===r.method,s=(r.uri||r.url).startsWith("/data/query"),i=e.response&&(429===e.response.statusCode||502===e.response.statusCode||503===e.response.statusCode);return!(!n&&!s||!i)||N.shouldRetry(e,t,r)}function Ye(e){return"https://www.sanity.io/help/"+e}const Xe=["image","file"],Ze=["before","after","replace"],et=e=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(e))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},tt=(e,t)=>{if(null===t||"object"!=typeof t||Array.isArray(t))throw new Error(`${e}() takes an object of properties`)},rt=(e,t)=>{if("string"!=typeof t||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(t)||t.includes(".."))throw new Error(`${e}(): "${t}" is not a valid document ID`)},nt=(e,t)=>{if(!t._id)throw new Error(`${e}() requires that the document contains an ID ("_id" property)`);rt(e,t._id)},st=(e,t)=>{if(!t._type)throw new Error(`\`${e}()\` requires that the document contains a type (\`_type\` property)`);((e,t)=>{if("string"!=typeof t)throw new Error(`\`${e}()\`: \`${t}\` is not a valid document type`)})(e,t._type)},it=e=>{if(!e.dataset)throw new Error("`dataset` must be provided to perform queries");return e.dataset||""},ot=e=>{if("string"!=typeof e||!/^[a-z0-9._-]{1,75}$/i.test(e))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return e},at=e=>{if(!e["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");const{type:t,id:r}=e["~experimental_resource"];switch(t){case"dataset":if(2!==r.split(".").length)throw new Error('Dataset resource ID must be in the format "project.dataset"');return;case"dashboard":case"media-library":case"canvas":return;default:throw new Error(`Unsupported resource type: ${t.toString()}`)}},ct=(e,t)=>{if(t["~experimental_resource"])throw new Error(`\`${e}\` does not support resource-based operations`)};const ut=e=>function(e){let t,r=!1;return(...n)=>(r||(t=e(...n),r=!0),t)}((...e)=>{}),ht=ut(),lt=ut(),dt=ut(),pt=ut(),ft=ut(Ye("js-client-browser-token")),gt=ut(),yt=ut(Ye("js-client-api-version")),mt={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,stega:{enabled:!1}},wt=["localhost","127.0.0.1","0.0.0.0"];function bt(e){if(Array.isArray(e)&&e.length>1&&e.includes("raw"))throw new TypeError('Invalid API perspective value: "raw". The raw-perspective can not be combined with other perspectives')}const vt=(e,t)=>{const r={...t,...e,stega:{..."boolean"==typeof t.stega?{enabled:t.stega}:t.stega||mt.stega,..."boolean"==typeof e.stega?{enabled:e.stega}:e.stega||{}}};r.apiVersion||yt();const n={...mt,...r},s=n.useProjectHostname&&!n["~experimental_resource"];if(typeof Promise>"u"){const e=Ye("js-client-promise-polyfill");throw new Error(`No native Promise-implementation found, polyfill needed - see ${e}`)}if(s&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(n["~experimental_resource"]&&at(n),typeof n.perspective<"u"&&bt(n.perspective),"encodeSourceMap"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMap' is not supported in '@sanity/client'. Did you mean 'stega.enabled'?");if("encodeSourceMapAtPath"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMapAtPath' is not supported in '@sanity/client'. Did you mean 'stega.filter'?");if("boolean"!=typeof n.stega.enabled)throw new Error(`stega.enabled must be a boolean, received ${n.stega.enabled}`);if(n.stega.enabled&&void 0===n.stega.studioUrl)throw new Error("stega.studioUrl must be defined when stega.enabled is true");if(n.stega.enabled&&"string"!=typeof n.stega.studioUrl&&"function"!=typeof n.stega.studioUrl)throw new Error(`stega.studioUrl must be a string or a function, received ${n.stega.studioUrl}`);const i=typeof window<"u"&&window.location&&window.location.hostname,o=i&&(e=>-1!==wt.indexOf(e))(window.location.hostname),a=!!n.token;n.withCredentials&&a&&(gt(),n.withCredentials=!1),i&&o&&a&&!0!==n.ignoreBrowserTokenWarning?ft():typeof n.useCdn>"u"&&lt(),s&&(e=>{if(!/^[-a-z0-9]+$/i.test(e))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")})(n.projectId),n.dataset&&et(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?ot(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion=`${n.apiVersion}`.replace(/^v/,""),n.isDefaultApi=n.apiHost===mt.apiHost,!0===n.useCdn&&n.withCredentials&&ht(),n.useCdn=!1!==n.useCdn&&!n.withCredentials,function(e){if("1"===e||"X"===e)return;const t=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&t instanceof Date&&t.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}(n.apiVersion);const c=n.apiHost.split("://",2),u=c[0],h=c[1],l=n.isDefaultApi?"apicdn.sanity.io":h;return s?(n.url=`${u}://${n.projectId}.${h}/v${n.apiVersion}`,n.cdnUrl=`${u}://${n.projectId}.${l}/v${n.apiVersion}`):(n.url=`${n.apiHost}/v${n.apiVersion}`,n.cdnUrl=n.url),n};class It extends Error{constructor(){super(...arguments),C(this,"name","ConnectionFailedError")}}class $t extends Error{constructor(e,t,r={}){super(e,r),C(this,"name","DisconnectError"),C(this,"reason"),this.reason=t}}class Et extends Error{constructor(e,t){super(e),C(this,"name","ChannelError"),C(this,"data"),this.data=t}}class jt extends Error{constructor(e,t,r={}){super(e,r),C(this,"name","MessageError"),C(this,"data"),this.data=t}}class Ot extends Error{constructor(){super(...arguments),C(this,"name","MessageParseError")}}const _t=["channelError","disconnect"];function xt(e,t){return G(()=>{const t=e();return ae(t)?t:oe(t)}).pipe(ee(e=>function(e,t){return new J(r=>{const n=t.includes("open"),s=t.includes("reconnect");function i(t){if("data"in t){const[e,n]=kt(t);return void r.error(e?new Ot("Unable to parse EventSource error message",{cause:n}):new jt((n?.data).message,n))}e.readyState===e.CLOSED?r.error(new It("EventSource connection failed")):s&&r.next({type:"reconnect"})}function o(){r.next({type:"open"})}function a(t){const[n,s]=kt(t);if(n)r.error(new Ot("Unable to parse EventSource message",{cause:n}));else{if("channelError"===t.type){const t=new URL(e.url).searchParams.get("tag");return void r.error(new Et(function(e,t){const r=e.error;return r?Ve(r)?ze(r,t):r.description?r.description:"string"==typeof r?r:JSON.stringify(r,null,2):e.message||"Unknown listener error"}(s?.data,t),s.data))}"disconnect"!==t.type?r.next({type:t.type,id:t.lastEventId,...s.data?{data:s.data}:{}}):r.error(new $t(`Server disconnected client: ${s.data?.reason||"unknown error"}`))}}e.addEventListener("error",i),n&&e.addEventListener("open",o);const c=[...new Set([..._t,...t])].filter(e=>"error"!==e&&"open"!==e&&"reconnect"!==e);return c.forEach(t=>e.addEventListener(t,a)),()=>{e.removeEventListener("error",i),n&&e.removeEventListener("open",o),c.forEach(t=>e.removeEventListener(t,a)),e.close()}})}(e,t)))}function kt(e){try{const t="string"==typeof e.data&&JSON.parse(e.data);return[null,{type:e.type,id:e.lastEventId,...Mt(t)?{}:{data:t}}]}catch(t){return[t,null]}}function Mt(e){for(const t in e)return!1;return!0}function Pt(e){if("string"==typeof e)return{id:e};if(Array.isArray(e))return{query:"*[_id in $ids]",params:{ids:e}};if("object"==typeof e&&null!==e&&"query"in e&&"string"==typeof e.query)return"params"in e&&"object"==typeof e.params&&null!==e.params?{query:e.query,params:e.params}:{query:e.query};const t=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join("\n");throw new Error(`Unknown selection - must be one of:\n\n${t}`)}class At{constructor(e,t={}){C(this,"selection"),C(this,"operations"),this.selection=e,this.operations=t}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return tt("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,t,r){return((e,t,r)=>{const n="insert(at, selector, items)";if(-1===Ze.indexOf(e)){const e=Ze.map(e=>`"${e}"`).join(", ");throw new Error(`${n} takes an "at"-argument which is one of: ${e}`)}if("string"!=typeof t)throw new Error(`${n} takes a "selector"-argument which must be a string`);if(!Array.isArray(r))throw new Error(`${n} takes an "items"-argument which must be an array`)})(e,t,r),this._assign("insert",{[e]:t,items:r})}append(e,t){return this.insert("after",`${e}[-1]`,t)}prepend(e,t){return this.insert("before",`${e}[0]`,t)}splice(e,t,r,n){const s=t<0?t-1:t,i=typeof r>"u"||-1===r?-1:Math.max(0,t+r),o=`${e}[${s}:${s<0&&i>=0?"":i}]`;return this.insert("replace",o,n||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return{...Pt(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,t,r=!0){return tt(e,t),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},r&&this.operations[e]||{},t)}),this}_set(e,t){return this._assign(e,t,!1)}}e=new WeakMap;let St=class t extends At{constructor(t,r,n){super(t,r),W(this,e),R(this,e,n)}clone(){return new t(this.selection,{...this.operations},U(this,e))}commit(t){if(!U(this,e))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r="string"==typeof this.selection,n=Object.assign({returnFirst:r,returnDocuments:!0},t);return U(this,e).mutate({patch:this.serialize()},n)}};t=new WeakMap;let Tt=class e extends At{constructor(e,r,n){super(e,r),W(this,t),R(this,t,n)}clone(){return new e(this.selection,{...this.operations},U(this,t))}commit(e){if(!U(this,t))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r="string"==typeof this.selection,n=Object.assign({returnFirst:r,returnDocuments:!0},e);return U(this,t).mutate({patch:this.serialize()},n)}};const Dt={returnDocuments:!1};class Ct{constructor(e=[],t){C(this,"operations"),C(this,"trxId"),this.operations=e,this.trxId=t}create(e){return tt("create",e),this._add({create:e})}createIfNotExists(e){const t="createIfNotExists";return tt(t,e),nt(t,e),this._add({[t]:e})}createOrReplace(e){const t="createOrReplace";return tt(t,e),nt(t,e),this._add({[t]:e})}delete(e){return rt("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}}r=new WeakMap;let qt=class e extends Ct{constructor(e,t,n){super(e,n),W(this,r),R(this,r,t)}clone(){return new e([...this.operations],U(this,r),this.trxId)}commit(e){if(!U(this,r))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return U(this,r).mutate(this.serialize(),Object.assign({transactionId:this.trxId},Dt,e||{}))}patch(e,t){const n="function"==typeof t,s="object"==typeof e&&("query"in e||"id"in e);if("string"!=typeof e&&e instanceof Tt)return this._add({patch:e.serialize()});if(n){const n=t(new Tt(e,{},U(this,r)));if(!(n instanceof Tt))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:n.serialize()})}if(s){const n=new Tt(e,t||{},U(this,r));return this._add({patch:n.serialize()})}return this._add({patch:{id:e,...t}})}};n=new WeakMap;let Ut=class e extends Ct{constructor(e,t,r){super(e,r),W(this,n),R(this,n,t)}clone(){return new e([...this.operations],U(this,n),this.trxId)}commit(e){if(!U(this,n))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return U(this,n).mutate(this.serialize(),Object.assign({transactionId:this.trxId},Dt,e||{}))}patch(e,t){const r="function"==typeof t;if("string"!=typeof e&&e instanceof St)return this._add({patch:e.serialize()});if(r){const r=t(new St(e,{},U(this,n)));if(!(r instanceof St))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:r.serialize()})}return this._add({patch:{id:e,...t}})}};const Wt=({query:e,params:t={},options:r={}})=>{const n=new URLSearchParams,{tag:s,includeMutations:i,returnQuery:o,...a}=r;s&&n.append("tag",s),n.append("query",e);for(const[c,u]of Object.entries(t))void 0!==u&&n.append(`$${c}`,JSON.stringify(u));for(const[c,u]of Object.entries(a))u&&n.append(c,`${u}`);return!1===o&&n.append("returnQuery","false"),!1===i&&n.append("includeMutations","false"),`?${n}`},Rt=(e={})=>{return{dryRun:e.dryRun,returnIds:!0,returnDocuments:(t=e.returnDocuments,r=!0,!1===t?void 0:typeof t>"u"?r:t),visibility:e.visibility||"sync",autoGenerateArrayKeys:e.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:e.skipCrossDatasetReferenceValidation};var t,r},Lt=e=>"response"===e.type,Nt=e=>e.body;function Vt(e,t,r,n,s={},i={}){const o="stega"in i?{...r||{},..."boolean"==typeof i.stega?{enabled:i.stega}:i.stega||{}}:r,a=o.enabled?xe(s):s,c=!1===i.filterResponse?e=>e:e=>e.result,{cache:u,next:h,...l}={useAbortSignal:typeof i.signal<"u",resultSourceMap:o.enabled?"withKeyArraySelector":i.resultSourceMap,...i,returnQuery:!1===i.filterResponse&&!1!==i.returnQuery},d=tr(e,t,"query",{query:n,params:a},typeof u<"u"||typeof h<"u"?{...l,fetch:{cache:u,next:h}}:l);return o.enabled?d.pipe(se(ie(be(()=>Promise.resolve().then(()=>wn),void 0).then(function(e){return e.stegaEncodeSourceMap$1}).then(({stegaEncodeSourceMap:e})=>e))),F(([e,t])=>{const r=t(e.result,e.resultSourceMap,o);return c({...e,result:r})})):d.pipe(F(c))}function zt(e,t,r,n={}){return or(e,t,{uri:cr(e,"doc",(()=>{if(!n.releaseId)return r;const e=De(r);if(!e){if(Ae(r))throw new Error(`The document ID (\`${r}\`) is a draft, but \`options.releaseId\` is set as \`${n.releaseId}\``);return Te(r,n.releaseId)}if(e!==n.releaseId)throw new Error(`The document ID (\`${r}\`) is already a version of \`${e}\` release, but this does not match the provided \`options.releaseId\` (\`${n.releaseId}\`)`);return r})()),json:!0,tag:n.tag,signal:n.signal}).pipe(Z(Lt),F(e=>e.body.documents&&e.body.documents[0]))}function Ht(e,t,r,n={}){return or(e,t,{uri:cr(e,"doc",r.join(",")),json:!0,tag:n.tag,signal:n.signal}).pipe(Z(Lt),F(e=>{const t=(n=e.body.documents||[],s=e=>e._id,n.reduce((e,t)=>(e[s(t)]=t,e),Object.create(null)));var n,s;return r.map(e=>t[e]||null)}))}function Bt(e,t,r,n={}){return tr(e,t,"query",{query:"*[sanity::partOfRelease($releaseId)]",params:{releaseId:r}},n)}function Jt(e,t,r,n){return nt("createIfNotExists",r),rr(e,t,r,"createIfNotExists",n)}function Gt(e,t,r,n){return nt("createOrReplace",r),rr(e,t,r,"createOrReplace",n)}function Ft(e,t,r,n,s){return nt("createVersion",r),st("createVersion",r),er(e,t,{actionType:"sanity.action.document.version.create",publishedId:n,document:r},s)}function Qt(e,t,r,n){return tr(e,t,"mutate",{mutations:[{delete:Pt(r)}]},n)}function Kt(e,t,r,n=!1,s){return er(e,t,{actionType:"sanity.action.document.version.discard",versionId:r,purge:n},s)}function Yt(e,t,r,n){return nt("replaceVersion",r),st("replaceVersion",r),er(e,t,{actionType:"sanity.action.document.version.replace",document:r},n)}function Xt(e,t,r,n,s){return er(e,t,{actionType:"sanity.action.document.version.unpublish",versionId:r,publishedId:n},s)}function Zt(e,t,r,n){let s;s=r instanceof Tt||r instanceof St?{patch:r.serialize()}:r instanceof qt||r instanceof Ut?r.serialize():r;return tr(e,t,"mutate",{mutations:Array.isArray(s)?s:[s],transactionId:n&&n.transactionId||void 0},n)}function er(e,t,r,n){return tr(e,t,"actions",{actions:Array.isArray(r)?r:[r],transactionId:n&&n.transactionId||void 0,skipCrossDatasetReferenceValidation:n&&n.skipCrossDatasetReferenceValidation||void 0,dryRun:n&&n.dryRun||void 0},n)}function tr(e,t,r,n,s={}){const i="mutate"===r,o="actions"===r,a="query"===r,c=i||o?"":Wt(n),u=!i&&!o&&c.length<11264,h=u?c:"",l=s.returnFirst,{timeout:d,token:p,tag:f,headers:g,returnQuery:y,lastLiveEventId:m,cacheMode:w}=s;return or(e,t,{method:u?"GET":"POST",uri:cr(e,r,h),json:!0,body:u?void 0:n,query:i&&Rt(s),timeout:d,headers:g,token:p,tag:f,returnQuery:y,perspective:s.perspective,resultSourceMap:s.resultSourceMap,lastLiveEventId:Array.isArray(m)?m[0]:m,cacheMode:w,canUseCdn:a,signal:s.signal,fetch:s.fetch,useAbortSignal:s.useAbortSignal,useCdn:s.useCdn}).pipe(Z(Lt),F(Nt),F(e=>{if(!i)return e;const t=e.results||[];if(s.returnDocuments)return l?t[0]&&t[0].document:t.map(e=>e.document);const r=l?"documentId":"documentIds",n=l?t[0]&&t[0].id:t.map(e=>e.id);return{transactionId:e.transactionId,results:t,[r]:n}}))}function rr(e,t,r,n,s={}){return tr(e,t,"mutate",{mutations:[{[n]:r}]},Object.assign({returnFirst:!0,returnDocuments:!0},s))}const nr=e=>void 0!==e.config().dataset&&void 0!==e.config().projectId||void 0!==e.config()["~experimental_resource"],sr=(e,t)=>nr(e)&&t.startsWith(cr(e,"query")),ir=(e,t)=>t.startsWith("/data/")||sr(e,t)||((e,t)=>nr(e)&&t.startsWith(cr(e,"mutate")))(e,t)||((e,t)=>nr(e)&&t.startsWith(cr(e,"doc","")))(e,t)||((e,t)=>nr(e)&&t.startsWith(cr(e,"listen")))(e,t)||((e,t)=>nr(e)&&t.startsWith(cr(e,"history","")))(e,t);function or(e,t,r){const n=r.url||r.uri,s=e.config(),i=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&ir(e,n):r.canUseCdn;let o=(r.useCdn??s.useCdn)&&i;const a=r.tag&&s.requestTagPrefix?[s.requestTagPrefix,r.tag].join("."):r.tag||s.requestTagPrefix;if(a&&null!==r.tag&&(r.query={tag:ot(a),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&sr(e,n)){const e=r.resultSourceMap??s.resultSourceMap;void 0!==e&&!1!==e&&(r.query={resultSourceMap:e,...r.query});const t=r.perspective||s.perspective;typeof t<"u"&&("previewDrafts"===t&&pt(),bt(t),r.query={perspective:Array.isArray(t)?t.join(","):t,...r.query},(Array.isArray(t)&&t.length>0||"previewDrafts"===t||"drafts"===t)&&o&&(o=!1,dt())),r.lastLiveEventId&&(r.query={...r.query,lastLiveEventId:r.lastLiveEventId}),!1===r.returnQuery&&(r.query={returnQuery:"false",...r.query}),o&&"noStale"==r.cacheMode&&(r.query={cacheMode:"noStale",...r.query})}const c=function(e,t={}){const r={};e.headers&&Object.assign(r,e.headers);const n=t.token||e.token;n&&(r.Authorization=`Bearer ${n}`),!t.useGlobalApi&&!e.useProjectHostname&&e.projectId&&(r["X-Sanity-Project-ID"]=e.projectId);const s=!!(typeof t.withCredentials>"u"?e.withCredentials:t.withCredentials),i=typeof t.timeout>"u"?e.timeout:t.timeout;return Object.assign({},t,{headers:Object.assign({},r,t.headers||{}),timeout:typeof i>"u"?3e5:i,proxy:t.proxy||e.proxy,json:!0,withCredentials:s,fetch:"object"==typeof t.fetch&&"object"==typeof e.fetch?{...e.fetch,...t.fetch}:t.fetch||e.fetch})}(s,Object.assign({},r,{url:ur(e,n,o)})),u=new J(e=>t(c,s.requester).subscribe(e));return r.signal?u.pipe((h=r.signal,e=>new J(t=>{const r=()=>t.error(function(e){if(hr)return new DOMException(e?.reason??"The operation was aborted.","AbortError");const t=new Error(e?.reason??"The operation was aborted.");return t.name="AbortError",t}(h));if(h&&h.aborted)return void r();const n=e.subscribe(t);return h.addEventListener("abort",r),()=>{h.removeEventListener("abort",r),n.unsubscribe()}}))):u;var h}function ar(e,t,r){return or(e,t,r).pipe(Z(e=>"response"===e.type),F(e=>e.body))}function cr(e,t,r){const n=e.config();if(n["~experimental_resource"]){at(n);return`${lr(n)}/${void 0!==r?`${t}/${r}`:t}`.replace(/\/($|\?)/,"$1")}const s=`/${t}/${it(n)}`;return`/data${void 0!==r?`${s}/${r}`:s}`.replace(/\/($|\?)/,"$1")}function ur(e,t,r=!1){const{url:n,cdnUrl:s}=e.config();return`${r?s:n}/${t.replace(/^\//,"")}`}const hr=!!globalThis.DOMException;const lr=e=>{if(!e["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");const{type:t,id:r}=e["~experimental_resource"];switch(t){case"dataset":{const e=r.split(".");if(2!==e.length)throw new Error('Dataset ID must be in the format "project.dataset"');return`/projects/${e[0]}/datasets/${e[1]}`}case"canvas":return`/canvases/${r}`;case"media-library":return`/media-libraries/${r}`;case"dashboard":return`/dashboards/${r}`;default:throw new Error(`Unsupported resource type: ${t.toString()}`)}};function dr(e,t,r){const n=it(e.config());return ar(e,t,{method:"POST",uri:`/agent/action/generate/${n}`,body:r})}function pr(e,t,r){const n=it(e.config());return ar(e,t,{method:"POST",uri:`/agent/action/transform/${n}`,body:r})}function fr(e,t,r){const n=it(e.config());return ar(e,t,{method:"POST",uri:`/agent/action/translate/${n}`,body:r})}class gr{constructor(e,t){W(this,s),W(this,i),R(this,s,e),R(this,i,t)}generate(e){return dr(U(this,s),U(this,i),e)}transform(e){return pr(U(this,s),U(this,i),e)}translate(e){return fr(U(this,s),U(this,i),e)}}s=new WeakMap,i=new WeakMap;class yr{constructor(e,t){W(this,o),W(this,a),R(this,o,e),R(this,a,t)}generate(e){return K(dr(U(this,o),U(this,a),e))}transform(e){return K(pr(U(this,o),U(this,a),e))}translate(e){return K(fr(U(this,o),U(this,a),e))}prompt(e){return K(function(e,t,r){const n=it(e.config());return ar(e,t,{method:"POST",uri:`/agent/action/prompt/${n}`,body:r})}(U(this,o),U(this,a),e))}patch(e){return K(function(e,t,r){const n=it(e.config());return ar(e,t,{method:"POST",uri:`/agent/action/patch/${n}`,body:r})}(U(this,o),U(this,a),e))}}o=new WeakMap,a=new WeakMap;class mr{constructor(e,t){W(this,c),W(this,u),R(this,c,e),R(this,u,t)}upload(e,t,r){return br(U(this,c),U(this,u),e,t,r)}}c=new WeakMap,u=new WeakMap;class wr{constructor(e,t){W(this,h),W(this,l),R(this,h,e),R(this,l,t)}upload(e,t,r){const n=br(U(this,h),U(this,l),e,t,r);return K(n.pipe(Z(e=>"response"===e.type),F(e=>e.body.document)))}}function br(e,t,r,n,s={}){(e=>{if(-1===Xe.indexOf(e))throw new Error(`Invalid asset type: ${e}. Must be one of ${Xe.join(", ")}`)})(r);let i=s.extract||void 0;i&&!i.length&&(i=["none"]);const o=e.config(),a=function(e,t){return typeof File>"u"||!(t instanceof File)?e:Object.assign({filename:!1===e.preserveFilename?void 0:t.name,contentType:t.type},e)}(s,n),{tag:c,label:u,title:h,description:l,creditLine:d,filename:p,source:f}=a,g={label:u,title:h,description:l,filename:p,meta:i,creditLine:d};return f&&(g.sourceId=f.id,g.sourceName=f.name,g.sourceUrl=f.url),or(e,t,{tag:c,method:"POST",timeout:a.timeout||0,uri:vr(o,r),headers:a.contentType?{"Content-Type":a.contentType}:{},query:g,body:n})}function vr(e,t){const r="image"===t?"images":"files";if(e["~experimental_resource"]){const{type:t,id:n}=e["~experimental_resource"];switch(t){case"dataset":throw new Error("Assets are not supported for dataset resources, yet. Configure the client with `{projectId: <projectId>, dataset: <datasetId>}` instead.");case"canvas":return`/canvases/${n}/assets/${r}`;case"media-library":return`/media-libraries/${n}/upload`;case"dashboard":return`/dashboards/${n}/assets/${r}`;default:throw new Error(`Unsupported resource type: ${t.toString()}`)}}return`assets/${r}/${it(e)}`}h=new WeakMap,l=new WeakMap;const Ir=G(()=>be(()=>Promise.resolve().then(()=>vn),void 0)).pipe(F(({default:e})=>e),Q(1));function $r(){return function(e){return e.pipe(te((e,t)=>e instanceof It?re(oe({type:"reconnect"}),de(1e3).pipe(ee(()=>t))):X(()=>e)))}}const Er=["includePreviousRevision","includeResult","includeMutations","includeAllVersions","visibility","effectFormat","tag"],jr={includeResult:!0};function Or(e,t,r={}){const{url:n,token:s,withCredentials:i,requestTagPrefix:o,headers:a}=this.config(),c=r.tag&&o?[o,r.tag].join("."):r.tag,u={...(d=r,p=jr,Object.keys(p).concat(Object.keys(d)).reduce((e,t)=>(e[t]=typeof d[t]>"u"?p[t]:d[t],e),{})),tag:c},h=((e,t)=>t.reduce((t,r)=>(typeof e[r]>"u"||(t[r]=e[r]),t),{}))(u,Er),l=`${n}${cr(this,"listen",Wt({query:e,params:t,options:{tag:c,...h}}))}`;var d,p;if(l.length>14800)return X(()=>new Error("Query too large for listener"));const f=u.events?u.events:["mutation"],g={};return i&&(g.withCredentials=!0),(s||a)&&(g.headers={},s&&(g.headers.Authorization=`Bearer ${s}`),a&&Object.assign(g.headers,a)),xt(()=>(typeof EventSource>"u"||g.headers?Ir:oe(EventSource)).pipe(F(e=>new e(l,g))),f).pipe($r(),Z(e=>f.includes(e.type)),F(e=>({type:e.type,..."data"in e?e.data:{}})))}function _r(e,t){return function(e){return t=>{let r,n=!1;const{predicate:s,...i}=e,o=t.pipe(ce(t=>{e.predicate(t)&&(n=!0,r=t)}),ne(()=>{n=!1,r=void 0}),ue(i)),a=new J(e=>{n&&e.next(r),e.complete()});return he(o,a)}}("function"==typeof e?{predicate:e,...t}:e)}const xr="2021-03-25";class kr{constructor(e){W(this,d),R(this,d,e)}events({includeDrafts:e=!1,tag:t}={}){ct("live",U(this,d).config());const{projectId:r,apiVersion:n,token:s,withCredentials:i,requestTagPrefix:o,headers:a}=U(this,d).config(),c=n.replace(/^v/,"");if("X"!==c&&c<xr)throw new Error(`The live events API requires API version ${xr} or later. The current API version is ${c}. Please update your API version to use this feature.`);if(e&&!s&&!i)throw new Error("The live events API requires a token or withCredentials when 'includeDrafts: true'. Please update your client configuration. The token should have the lowest possible access role.");const u=cr(U(this,d),"live/events"),h=new URL(U(this,d).getUrl(u,!1)),l=t&&o?[o,t].join("."):t;l&&h.searchParams.set("tag",l),e&&h.searchParams.set("includeDrafts","true");const p={};e&&i&&(p.withCredentials=!0),(e&&s||a)&&(p.headers={},e&&s&&(p.headers.Authorization=`Bearer ${s}`),a&&Object.assign(p.headers,a));const f=`${h.href}::${JSON.stringify(p)}`,g=Mr.get(f);if(g)return g;const y=xt(()=>(typeof EventSource>"u"||p.headers?Ir:oe(EventSource)).pipe(F(e=>new e(h.href,p))),["message","restart","welcome","reconnect","goaway"]).pipe($r(),F(e=>{if("message"===e.type){const{data:t,...r}=e;return{...r,tags:t.tags}}return e})),m=function(e,t){return new J(r=>{const n=new AbortController,s=n.signal;return fetch(e,{...t,signal:n.signal}).then(e=>{r.next(e),r.complete()},e=>{s.aborted||r.error(e)}),()=>n.abort()})}(h,{method:"OPTIONS",mode:"cors",credentials:p.withCredentials?"include":"omit",headers:p.headers}).pipe(ee(()=>pe),te(()=>{throw new Je({projectId:r})})),w=re(m,y).pipe(ne(()=>Mr.delete(f)),_r({predicate:e=>"welcome"===e.type}));return Mr.set(f,w),w}}d=new WeakMap;const Mr=new Map;class Pr{constructor(e,t){W(this,p),W(this,f),R(this,p,e),R(this,f,t)}create(e,t){return Sr(U(this,p),U(this,f),"PUT",e,t)}edit(e,t){return Sr(U(this,p),U(this,f),"PATCH",e,t)}delete(e){return Sr(U(this,p),U(this,f),"DELETE",e)}list(){return ar(U(this,p),U(this,f),{uri:"/datasets",tag:null})}}p=new WeakMap,f=new WeakMap;class Ar{constructor(e,t){W(this,g),W(this,y),R(this,g,e),R(this,y,t)}create(e,t){return ct("dataset",U(this,g).config()),K(Sr(U(this,g),U(this,y),"PUT",e,t))}edit(e,t){return ct("dataset",U(this,g).config()),K(Sr(U(this,g),U(this,y),"PATCH",e,t))}delete(e){return ct("dataset",U(this,g).config()),K(Sr(U(this,g),U(this,y),"DELETE",e))}list(){return ct("dataset",U(this,g).config()),K(ar(U(this,g),U(this,y),{uri:"/datasets",tag:null}))}}function Sr(e,t,r,n,s){return ct("dataset",e.config()),et(n),ar(e,t,{method:r,uri:`/datasets/${n}`,body:s,tag:null})}g=new WeakMap,y=new WeakMap;class Tr{constructor(e,t){W(this,m),W(this,w),R(this,m,e),R(this,w,t)}list(e){ct("projects",U(this,m).config());const t=!1===e?.includeMembers?"/projects?includeMembers=false":"/projects";return ar(U(this,m),U(this,w),{uri:t})}getById(e){return ct("projects",U(this,m).config()),ar(U(this,m),U(this,w),{uri:`/projects/${e}`})}}m=new WeakMap,w=new WeakMap;class Dr{constructor(e,t){W(this,b),W(this,v),R(this,b,e),R(this,v,t)}list(e){ct("projects",U(this,b).config());const t=!1===e?.includeMembers?"/projects?includeMembers=false":"/projects";return K(ar(U(this,b),U(this,v),{uri:t}))}getById(e){return ct("projects",U(this,b).config()),K(ar(U(this,b),U(this,v),{uri:`/projects/${e}`}))}}b=new WeakMap,v=new WeakMap;const Cr=le("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",8),qr=(e,t)=>t?Te(e,t):function(e){if(Se(e)){const t=Ce(e);return Me+t}return Ae(e)?e:Me+e}(e);function Ur(e,{releaseId:t,publishedId:r,document:n}){if(r&&n._id){const e=qr(r,t);return((e,t)=>{if(t._id&&t._id!==e)throw new Error(`The provided document ID (\`${t._id}\`) does not match the generated version ID (\`${e}\`)`)})(e,n),e}if(n._id){const r=Ae(n._id),s=Se(n._id);if(!r&&!s)throw new Error(`\`${e}()\` requires a document with an \`_id\` that is a version or draft ID`);if(t){if(r)throw new Error(`\`${e}()\` was called with a document ID (\`${n._id}\`) that is a draft ID, but a release ID (\`${t}\`) was also provided.`);const s=De(n._id);if(s!==t)throw new Error(`\`${e}()\` was called with a document ID (\`${n._id}\`) that is a version ID, but the release ID (\`${t}\`) does not match the document's version ID (\`${s}\`).`)}return n._id}if(r)return qr(r,t);throw new Error(`\`${e}()\` requires either a publishedId or a document with an \`_id\``)}const Wr=(e,t)=>{const[r,n,s]=((e,t)=>{if("object"==typeof e&&null!==e&&("releaseId"in e||"metadata"in e)){const{releaseId:r=Cr(),metadata:n={}}=e;return[r,n,t]}return[Cr(),{},e]})(e,t);return{action:{actionType:"sanity.action.release.create",releaseId:r,metadata:{...n,releaseType:n.releaseType||"undecided"}},options:s}};class Rr{constructor(e,t){W(this,I),W(this,$),R(this,I,e),R(this,$,t)}get({releaseId:e},t){return zt(U(this,I),U(this,$),`_.releases.${e}`,t)}create(e,t){const{action:r,options:n}=Wr(e,t),{releaseId:s,metadata:i}=r;return er(U(this,I),U(this,$),r,n).pipe(F(e=>({...e,releaseId:s,metadata:i})))}edit({releaseId:e,patch:t},r){const n={actionType:"sanity.action.release.edit",releaseId:e,patch:t};return er(U(this,I),U(this,$),n,r)}publish({releaseId:e},t){const r={actionType:"sanity.action.release.publish",releaseId:e};return er(U(this,I),U(this,$),r,t)}archive({releaseId:e},t){const r={actionType:"sanity.action.release.archive",releaseId:e};return er(U(this,I),U(this,$),r,t)}unarchive({releaseId:e},t){const r={actionType:"sanity.action.release.unarchive",releaseId:e};return er(U(this,I),U(this,$),r,t)}schedule({releaseId:e,publishAt:t},r){const n={actionType:"sanity.action.release.schedule",releaseId:e,publishAt:t};return er(U(this,I),U(this,$),n,r)}unschedule({releaseId:e},t){const r={actionType:"sanity.action.release.unschedule",releaseId:e};return er(U(this,I),U(this,$),r,t)}delete({releaseId:e},t){const r={actionType:"sanity.action.release.delete",releaseId:e};return er(U(this,I),U(this,$),r,t)}fetchDocuments({releaseId:e},t){return Bt(U(this,I),U(this,$),e,t)}}I=new WeakMap,$=new WeakMap;class Lr{constructor(e,t){W(this,E),W(this,j),R(this,E,e),R(this,j,t)}get({releaseId:e},t){return K(zt(U(this,E),U(this,j),`_.releases.${e}`,t))}async create(e,t){const{action:r,options:n}=Wr(e,t),{releaseId:s,metadata:i}=r;return{...await K(er(U(this,E),U(this,j),r,n)),releaseId:s,metadata:i}}edit({releaseId:e,patch:t},r){const n={actionType:"sanity.action.release.edit",releaseId:e,patch:t};return K(er(U(this,E),U(this,j),n,r))}publish({releaseId:e},t){const r={actionType:"sanity.action.release.publish",releaseId:e};return K(er(U(this,E),U(this,j),r,t))}archive({releaseId:e},t){const r={actionType:"sanity.action.release.archive",releaseId:e};return K(er(U(this,E),U(this,j),r,t))}unarchive({releaseId:e},t){const r={actionType:"sanity.action.release.unarchive",releaseId:e};return K(er(U(this,E),U(this,j),r,t))}schedule({releaseId:e,publishAt:t},r){const n={actionType:"sanity.action.release.schedule",releaseId:e,publishAt:t};return K(er(U(this,E),U(this,j),n,r))}unschedule({releaseId:e},t){const r={actionType:"sanity.action.release.unschedule",releaseId:e};return K(er(U(this,E),U(this,j),r,t))}delete({releaseId:e},t){const r={actionType:"sanity.action.release.delete",releaseId:e};return K(er(U(this,E),U(this,j),r,t))}fetchDocuments({releaseId:e},t){return K(Bt(U(this,E),U(this,j),e,t))}}E=new WeakMap,j=new WeakMap;class Nr{constructor(e,t){W(this,O),W(this,_),R(this,O,e),R(this,_,t)}getById(e){return ar(U(this,O),U(this,_),{uri:`/users/${e}`})}}O=new WeakMap,_=new WeakMap;class Vr{constructor(e,t){W(this,x),W(this,k),R(this,x,e),R(this,k,t)}getById(e){return K(ar(U(this,x),U(this,k),{uri:`/users/${e}`}))}}x=new WeakMap,k=new WeakMap;M=new WeakMap,P=new WeakMap;let zr=class e{constructor(e,t=mt){C(this,"assets"),C(this,"datasets"),C(this,"live"),C(this,"projects"),C(this,"users"),C(this,"agent"),C(this,"releases"),W(this,M),W(this,P),C(this,"listen",Or),this.config(t),R(this,P,e),this.assets=new mr(this,U(this,P)),this.datasets=new Pr(this,U(this,P)),this.live=new kr(this),this.projects=new Tr(this,U(this,P)),this.users=new Nr(this,U(this,P)),this.agent={action:new gr(this,U(this,P))},this.releases=new Rr(this,U(this,P))}clone(){return new e(U(this,P),this.config())}config(e){if(void 0===e)return{...U(this,M)};if(U(this,M)&&!1===U(this,M).allowReconfigure)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return R(this,M,vt(e,U(this,M)||{})),this}withConfig(t){const r=this.config();return new e(U(this,P),{...r,...t,stega:{...r.stega||{},..."boolean"==typeof t?.stega?{enabled:t.stega}:t?.stega||{}}})}fetch(e,t,r){return Vt(this,U(this,P),U(this,M).stega,e,t,r)}getDocument(e,t){return zt(this,U(this,P),e,t)}getDocuments(e,t){return Ht(this,U(this,P),e,t)}create(e,t){return rr(this,U(this,P),e,"create",t)}createIfNotExists(e,t){return Jt(this,U(this,P),e,t)}createOrReplace(e,t){return Gt(this,U(this,P),e,t)}createVersion({document:e,publishedId:t,releaseId:r},n){const s=Ur("createVersion",{document:e,publishedId:t,releaseId:r}),i={...e,_id:s},o=t||Ce(e._id);return Ft(this,U(this,P),i,o,n)}delete(e,t){return Qt(this,U(this,P),e,t)}discardVersion({releaseId:e,publishedId:t},r,n){const s=qr(t,e);return Kt(this,U(this,P),s,r,n)}replaceVersion({document:e,publishedId:t,releaseId:r},n){const s=Ur("replaceVersion",{document:e,publishedId:t,releaseId:r}),i={...e,_id:s};return Yt(this,U(this,P),i,n)}unpublishVersion({releaseId:e,publishedId:t},r){const n=Te(t,e);return Xt(this,U(this,P),n,t,r)}mutate(e,t){return Zt(this,U(this,P),e,t)}patch(e,t){return new St(e,t,this)}transaction(e){return new Ut(e,this)}action(e,t){return er(this,U(this,P),e,t)}request(e){return ar(this,U(this,P),e)}getUrl(e,t){return ur(this,e,t)}getDataUrl(e,t){return cr(this,e,t)}};A=new WeakMap,S=new WeakMap;let Hr=class e{constructor(e,t=mt){C(this,"assets"),C(this,"datasets"),C(this,"live"),C(this,"projects"),C(this,"users"),C(this,"agent"),C(this,"releases"),C(this,"observable"),W(this,A),W(this,S),C(this,"listen",Or),this.config(t),R(this,S,e),this.assets=new wr(this,U(this,S)),this.datasets=new Ar(this,U(this,S)),this.live=new kr(this),this.projects=new Dr(this,U(this,S)),this.users=new Vr(this,U(this,S)),this.agent={action:new yr(this,U(this,S))},this.releases=new Lr(this,U(this,S)),this.observable=new zr(e,t)}clone(){return new e(U(this,S),this.config())}config(e){if(void 0===e)return{...U(this,A)};if(U(this,A)&&!1===U(this,A).allowReconfigure)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),R(this,A,vt(e,U(this,A)||{})),this}withConfig(t){const r=this.config();return new e(U(this,S),{...r,...t,stega:{...r.stega||{},..."boolean"==typeof t?.stega?{enabled:t.stega}:t?.stega||{}}})}fetch(e,t,r){return K(Vt(this,U(this,S),U(this,A).stega,e,t,r))}getDocument(e,t){return K(zt(this,U(this,S),e,t))}getDocuments(e,t){return K(Ht(this,U(this,S),e,t))}create(e,t){return K(rr(this,U(this,S),e,"create",t))}createIfNotExists(e,t){return K(Jt(this,U(this,S),e,t))}createOrReplace(e,t){return K(Gt(this,U(this,S),e,t))}createVersion({document:e,publishedId:t,releaseId:r},n){const s=Ur("createVersion",{document:e,publishedId:t,releaseId:r}),i={...e,_id:s},o=t||Ce(e._id);return Y(Ft(this,U(this,S),i,o,n))}delete(e,t){return K(Qt(this,U(this,S),e,t))}discardVersion({releaseId:e,publishedId:t},r,n){const s=qr(t,e);return K(Kt(this,U(this,S),s,r,n))}replaceVersion({document:e,publishedId:t,releaseId:r},n){const s=Ur("replaceVersion",{document:e,publishedId:t,releaseId:r}),i={...e,_id:s};return Y(Yt(this,U(this,S),i,n))}unpublishVersion({releaseId:e,publishedId:t},r){const n=Te(t,e);return K(Xt(this,U(this,S),n,t,r))}mutate(e,t){return K(Zt(this,U(this,S),e,t))}patch(e,t){return new Tt(e,t,this)}transaction(e){return new qt(e,this)}action(e,t){return K(er(this,U(this,S),e,t))}request(e){return K(ar(this,U(this,S),e))}dataRequest(e,t,r){return K(tr(this,U(this,S),e,t,r))}getUrl(e,t){return ur(this,e,t)}getDataUrl(e,t){return cr(this,e,t)}};const Br=(Gr=Hr,{requester:Qe(Jr=[]),createClient:e=>{const t=Qe(Jr);return new Gr((r,n)=>(n||t)({maxRedirects:0,maxRetries:e.maxRetries,retryDelay:e.retryDelay,...r}),e)}}).createClient;var Jr,Gr,Fr={exports:{}};const Qr=me(Fr.exports=function(){function e(){return e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.apply(this,arguments)}function t(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=t(e))||r){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function i(e){var t=e.split("-"),r=t[1],n=t[2],i=t[3];if(!r||!n||!i)throw new Error("Malformed asset _ref '"+e+"'. Expected an id like \""+s+'".');var o=n.split("x"),a=+o[0],c=+o[1];if(!isFinite(a)||!isFinite(c))throw new Error("Malformed asset _ref '"+e+"'. Expected an id like \""+s+'".');return{id:r,width:a,height:c,format:i}}var o=function(e){return!!e&&"string"==typeof e._ref},a=function(e){return!!e&&"string"==typeof e._id},c=function(e){var t=e;return!(!t||!t.asset)&&"string"==typeof t.asset.url};function u(t){if(!t)return null;var r;if("string"==typeof t&&h(t))r={asset:{_ref:l(t)}};else if("string"==typeof t)r={asset:{_ref:t}};else if(o(t))r={asset:t};else if(a(t))r={asset:{_ref:t._id||""}};else if(c(t))r={asset:{_ref:l(t.asset.url)}};else{if("object"!=typeof t.asset)return null;r=e({},t)}var n=t;return n.crop&&(r.crop=n.crop),n.hotspot&&(r.hotspot=n.hotspot),d(r)}function h(e){return/^https?:\/\//.test(""+e)}function l(e){return("image-"+e.split("/").slice(-1)[0]).replace(/\.([a-z]+)$/,"-$1")}function d(t){if(t.crop&&t.hotspot)return t;var r=e({},t);return r.crop||(r.crop={left:0,top:0,bottom:0,right:0}),r.hotspot||(r.hotspot={x:.5,y:.5,height:1,width:1}),r}var p=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"],["frame","frame"]];function f(t){var r=e({},t||{}),n=r.source;delete r.source;var s=u(n);if(!s)throw new Error("Unable to resolve image URL from source ("+JSON.stringify(n)+")");var o=i(s.asset._ref||s.asset._id||""),a=Math.round(s.crop.left*o.width),c=Math.round(s.crop.top*o.height),h={left:a,top:c,width:Math.round(o.width-s.crop.right*o.width-a),height:Math.round(o.height-s.crop.bottom*o.height-c)},l=s.hotspot.height*o.height/2,d=s.hotspot.width*o.width/2,p=s.hotspot.x*o.width,f=s.hotspot.y*o.height,m={left:p-d,top:f-l,right:p+d,bottom:f+l};return r.rect||r.focalPoint||r.ignoreImageParams||r.crop||(r=e({},r,y({crop:h,hotspot:m},r))),g(e({},r,{asset:o}))}function g(e){var t=(e.baseUrl||"https://cdn.sanity.io").replace(/\/+$/,""),r=e.vanityName?"/"+e.vanityName:"",n=e.asset.id+"-"+e.asset.width+"x"+e.asset.height+"."+e.asset.format+r,s=t+"/images/"+e.projectId+"/"+e.dataset+"/"+n,i=[];if(e.rect){var o=e.rect,a=o.left,c=o.top,u=o.width,h=o.height;(0!==a||0!==c||h!==e.asset.height||u!==e.asset.width)&&i.push("rect="+a+","+c+","+u+","+h)}e.bg&&i.push("bg="+e.bg),e.focalPoint&&(i.push("fp-x="+e.focalPoint.x),i.push("fp-y="+e.focalPoint.y));var l=[e.flipHorizontal&&"h",e.flipVertical&&"v"].filter(Boolean).join("");return l&&i.push("flip="+l),p.forEach(function(t){var r=t[0],n=t[1];void 0!==e[r]?i.push(n+"="+encodeURIComponent(e[r])):void 0!==e[n]&&i.push(n+"="+encodeURIComponent(e[n]))}),0===i.length?s:s+"?"+i.join("&")}function y(e,t){var r,n=t.width,s=t.height;if(!n||!s)return{width:n,height:s,rect:e.crop};var i=e.crop,o=e.hotspot,a=n/s;if(i.width/i.height>a){var c=Math.round(i.height),u=Math.round(c*a),h=Math.max(0,Math.round(i.top)),l=Math.round((o.right-o.left)/2+o.left),d=Math.max(0,Math.round(l-u/2));d<i.left?d=i.left:d+u>i.left+i.width&&(d=i.left+i.width-u),r={left:d,top:h,width:u,height:c}}else{var p=i.width,f=Math.round(p/a),g=Math.max(0,Math.round(i.left)),y=Math.round((o.bottom-o.top)/2+o.top),m=Math.max(0,Math.round(y-f/2));m<i.top?m=i.top:m+f>i.top+i.height&&(m=i.top+i.height-f),r={left:g,top:m,width:p,height:f}}return{width:n,height:s,rect:r}}var m=["clip","crop","fill","fillmax","max","scale","min"],w=["top","bottom","left","right","center","focalpoint","entropy"],b=["format"];function v(e){return!(!e||!("config"in e))&&"function"==typeof e.config}function I(e){return!(!e||!("clientConfig"in e))&&"object"==typeof e.clientConfig}function $(e){for(var t,r=n(p);!(t=r()).done;){var s=t.value,i=s[0],o=s[1];if(e===i||e===o)return i}return e}function E(e){if(v(e)){var t=e.config(),r=t.apiHost,n=t.projectId,s=t.dataset;return new j(null,{baseUrl:(r||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn."),projectId:n,dataset:s})}if(I(e)){var i=e.clientConfig,o=i.apiHost,a=i.projectId,c=i.dataset;return new j(null,{baseUrl:(o||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn."),projectId:a,dataset:c})}return new j(null,e||{})}var j=function(){function t(t,r){this.options=void 0,this.options=t?e({},t.options||{},r||{}):e({},r||{})}var r=t.prototype;return r.withOptions=function(r){var n=r.baseUrl||this.options.baseUrl,s={baseUrl:n};for(var i in r)r.hasOwnProperty(i)&&(s[$(i)]=r[i]);return new t(this,e({baseUrl:n},s))},r.image=function(e){return this.withOptions({source:e})},r.dataset=function(e){return this.withOptions({dataset:e})},r.projectId=function(e){return this.withOptions({projectId:e})},r.bg=function(e){return this.withOptions({bg:e})},r.dpr=function(e){return this.withOptions(e&&1!==e?{dpr:e}:{})},r.width=function(e){return this.withOptions({width:e})},r.height=function(e){return this.withOptions({height:e})},r.focalPoint=function(e,t){return this.withOptions({focalPoint:{x:e,y:t}})},r.maxWidth=function(e){return this.withOptions({maxWidth:e})},r.minWidth=function(e){return this.withOptions({minWidth:e})},r.maxHeight=function(e){return this.withOptions({maxHeight:e})},r.minHeight=function(e){return this.withOptions({minHeight:e})},r.size=function(e,t){return this.withOptions({width:e,height:t})},r.blur=function(e){return this.withOptions({blur:e})},r.sharpen=function(e){return this.withOptions({sharpen:e})},r.rect=function(e,t,r,n){return this.withOptions({rect:{left:e,top:t,width:r,height:n}})},r.format=function(e){return this.withOptions({format:e})},r.invert=function(e){return this.withOptions({invert:e})},r.orientation=function(e){return this.withOptions({orientation:e})},r.quality=function(e){return this.withOptions({quality:e})},r.forceDownload=function(e){return this.withOptions({download:e})},r.flipHorizontal=function(){return this.withOptions({flipHorizontal:!0})},r.flipVertical=function(){return this.withOptions({flipVertical:!0})},r.ignoreImageParams=function(){return this.withOptions({ignoreImageParams:!0})},r.fit=function(e){if(-1===m.indexOf(e))throw new Error('Invalid fit mode "'+e+'"');return this.withOptions({fit:e})},r.crop=function(e){if(-1===w.indexOf(e))throw new Error('Invalid crop mode "'+e+'"');return this.withOptions({crop:e})},r.saturation=function(e){return this.withOptions({saturation:e})},r.auto=function(e){if(-1===b.indexOf(e))throw new Error('Invalid auto mode "'+e+'"');return this.withOptions({auto:e})},r.pad=function(e){return this.withOptions({pad:e})},r.vanityName=function(e){return this.withOptions({vanityName:e})},r.frame=function(e){if(1!==e)throw new Error('Invalid frame value "'+e+'"');return this.withOptions({frame:e})},r.url=function(){return f(this.options)},r.toString=function(){return this.url()},t}();return E}()),Kr=/_key\s*==\s*['"](.*)['"]/;function Yr(e){if(!Array.isArray(e))throw new Error("Path is not an array");return e.reduce((e,t,r)=>{const n=typeof t;if("number"===n)return`${e}[${t}]`;if("string"===n)return`${e}${0===r?"":"."}${t}`;if(function(e){return"string"==typeof e?Kr.test(e.trim()):"object"==typeof e&&"_key"in e}(t)&&t._key)return`${e}[_key=="${t._key}"]`;if(Array.isArray(t)){const[r,n]=t;return`${e}[${r}:${n}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(t)}\``)},"")}const Xr={"\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","'":"\\'","\\":"\\\\"},Zr={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t","\\'":"'","\\\\":"\\"};function en(e){const t=[],r=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let n;for(;null!==(n=r.exec(e));){if(void 0!==n[1]){const e=n[1].replace(/\\(\\|f|n|r|t|')/g,e=>Zr[e]);t.push(e);continue}if(void 0===n[2]){if(void 0!==n[3]){const e=n[3].replace(/\\(\\')/g,e=>Zr[e]);t.push({_key:e,_index:-1});continue}}else t.push(parseInt(n[2],10))}return t}function tn(e){return e.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(""!==e._key)return{_key:e._key};if(-1!==e._index)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function rn(e,t){if(!t?.mappings)return;const r=function(e){return`$${e.map(e=>"string"==typeof e?`['${e.replace(/[\f\n\r\t'\\]/g,e=>Xr[e])}']`:"number"==typeof e?`[${e}]`:""!==e._key?`[?(@._key=='${e._key.replace(/['\\]/g,e=>Xr[e])}')]`:`[${e._index}]`).join("")}`}(e.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(-1!==e._index)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)}));if(void 0!==t.mappings[r])return{mapping:t.mappings[r],matchedPath:r,pathSuffix:""};const n=Object.entries(t.mappings).filter(([e])=>r.startsWith(e)).sort(([e],[t])=>t.length-e.length);if(0==n.length)return;const[s,i]=n[0];return{mapping:i,matchedPath:s,pathSuffix:r.substring(s.length)}}function nn(e,t,r=[]){if(function(e){return null!==e&&Array.isArray(e)}(e))return e.map((e,n)=>{if(ve(e)){const s=e._key;if("string"==typeof s)return nn(e,t,r.concat({_key:s,_index:n}))}return nn(e,t,r.concat(n))});if(ve(e)){if("block"===e._type||"span"===e._type){const n={...e};return"block"===e._type?n.children=nn(e.children,t,r.concat("children")):"span"===e._type&&(n.text=nn(e.text,t,r.concat("text"))),n}return Object.fromEntries(Object.entries(e).map(([e,n])=>[e,nn(n,t,r.concat(e))]))}return t(e,r)}function sn(e,t,r){return nn(e,(e,n)=>{if("string"!=typeof e)return e;const s=rn(n,t);if(!s)return e;const{mapping:i,matchedPath:o}=s;if("value"!==i.type||"documentValue"!==i.source.type)return e;const a=t.documents[i.source.document],c=t.paths[i.source.path],u=en(o),h=en(c).concat(n.slice(u.length));return r({sourcePath:h,sourceDocument:a,resultPath:n,value:e})})}const on=".",an=`drafts${on}`,cn=`versions${on}`;function un(e){return e.startsWith(an)}function hn(e){return e.startsWith(cn)}function ln(e){const{baseUrl:t,workspace:r="default",tool:n="default",id:s,type:i,path:o,projectId:a,dataset:c}=e;if(!t)throw new Error("baseUrl is required");if(!o)throw new Error("path is required");if(!s)throw new Error("id is required");if("/"!==t&&t.endsWith("/"))throw new Error("baseUrl must not end with a slash");const u="default"===r?void 0:r,h="default"===n?void 0:n,l=function(e){return hn(e)?e.split(on).slice(2).join(on):un(e)?e.slice(an.length):e}(s),d=Array.isArray(o)?Yr(tn(o)):o,p=new URLSearchParams({baseUrl:t,id:l,type:i,path:d});if(u&&p.set("workspace",u),h&&p.set("tool",h),a&&p.set("projectId",a),c&&p.set("dataset",c),function(e){return!un(e)&&!hn(e)}(s))p.set("perspective","published");else if(hn(s)){const e=function(e){if(!hn(e))return;const[t,r,...n]=e.split(on);return r}(s);p.set("perspective",e)}const f=["/"===t?"":t];u&&f.push(u);const g=["mode=presentation",`id=${l}`,`type=${i}`,`path=${encodeURIComponent(d)}`];return h&&g.push(`tool=${h}`),f.push("intent","edit",`${g.join(";")}?${p}`),f.join("/")}const dn=({sourcePath:e,resultPath:t,value:r})=>{if(/^\d{4}-\d{2}-\d{2}/.test(n=r)&&Date.parse(n)||function(e){try{new URL(e,e.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}(r))return!1;var n;const s=e.at(-1);return!("slug"===e.at(-2)&&"current"===s||"string"==typeof s&&(s.startsWith("_")||s.endsWith("Id"))||e.some(e=>"meta"===e||"metadata"===e||"openGraph"===e||"seo"===e)||fn(e)||fn(t)||"string"==typeof s&&pn.has(s))},pn=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]);function fn(e){return e.some(e=>"string"==typeof e&&null!==e.match(/type/i))}function gn(e,t,r){const{filter:n,logger:s,enabled:i}=r;if(!i){const n="config.enabled must be true, don't call this function otherwise";throw s?.error?.(`[@sanity/client]: ${n}`,{result:e,resultSourceMap:t,config:r}),new TypeError(n)}if(!t)return s?.error?.("[@sanity/client]: Missing Content Source Map from response body",{result:e,resultSourceMap:t,config:r}),e;if(!r.studioUrl){const n="config.studioUrl must be defined";throw s?.error?.(`[@sanity/client]: ${n}`,{result:e,resultSourceMap:t,config:r}),new TypeError(n)}const o={encoded:[],skipped:[]},a=sn(e,t,({sourcePath:e,sourceDocument:t,resultPath:i,value:a})=>{if(!1===("function"==typeof n?n({sourcePath:e,resultPath:i,filterDefault:dn,sourceDocument:t,value:a}):dn({sourcePath:e,resultPath:i,value:a})))return s&&o.skipped.push({path:yn(e),value:`${a.slice(0,20)}${a.length>20?"...":""}`,length:a.length}),a;s&&o.encoded.push({path:yn(e),value:`${a.slice(0,20)}${a.length>20?"...":""}`,length:a.length});const{baseUrl:c,workspace:u,tool:h}=function(e){let t="string"==typeof e?e:e.baseUrl;return"/"!==t&&(t=t.replace(/\/$/,"")),"string"==typeof e?{baseUrl:t}:{...e,baseUrl:t}}("function"==typeof r.studioUrl?r.studioUrl(t):r.studioUrl);if(!c)return a;const{_id:l,_type:d,_projectId:p,_dataset:f}=t;return je(a,{origin:"sanity.io",href:ln({baseUrl:c,workspace:u,tool:h,id:l,type:d,path:e,...!r.omitCrossDatasetReferenceData&&{dataset:f,projectId:p}})},!1)});if(s){const e=o.skipped.length,t=o.encoded.length;if((e||t)&&((s?.groupCollapsed||s.log)?.("[@sanity/client]: Encoding source map into result"),s.log?.(`[@sanity/client]: Paths encoded: ${o.encoded.length}, skipped: ${o.skipped.length}`)),o.encoded.length>0&&(s?.log?.("[@sanity/client]: Table of encoded paths"),(s?.table||s.log)?.(o.encoded)),o.skipped.length>0){const e=new Set;for(const{path:t}of o.skipped)e.add(t.replace(Kr,"0").replace(/\[\d+\]/g,"[]"));s?.log?.("[@sanity/client]: List of skipped paths",[...e.values()])}(e||t)&&s?.groupEnd?.()}return a}function yn(e){return Yr(tn(e))}var mn=Object.freeze({__proto__:null,stegaEncodeSourceMap:gn});const wn=Object.freeze(Object.defineProperty({__proto__:null,encodeIntoResult:sn,stegaEncodeSourceMap:gn,stegaEncodeSourceMap$1:mn},Symbol.toStringTag,{value:"Module"}));var bn=fe.EventSourcePolyfill;const vn=ge({__proto__:null,default:me(bn)},[bn]);function In(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?In(Object(r),!0).forEach(function(t){En(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function En(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jn(e){return"span"===e._type&&"text"in e&&"string"==typeof e.text&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(e=>"string"==typeof e))}function On(e){return"string"==typeof e._type&&"@"!==e._type[0]&&(!("markDefs"in e)||!e.markDefs||Array.isArray(e.markDefs)&&e.markDefs.every(e=>"string"==typeof e._key))&&"children"in e&&Array.isArray(e.children)&&e.children.every(e=>"object"==typeof e&&"_type"in e)}function _n(e){return On(e)&&"listItem"in e&&"string"==typeof e.listItem&&(typeof e.level>"u"||"number"==typeof e.level)}function xn(e){return"@list"===e._type}function kn(e){return"@span"===e._type}function Mn(e){return"@text"===e._type}const Pn=["strong","em","code","underline","strike-through"];function An(e,t,r){if(!jn(e)||!e.marks)return[];if(!e.marks.length)return[];const n=e.marks.slice(),s={};return n.forEach(e=>{s[e]=1;for(let n=t+1;n<r.length;n++){const t=r[n];if(!(t&&jn(t)&&Array.isArray(t.marks)&&-1!==t.marks.indexOf(e)))break;s[e]++}}),n.sort((e,t)=>function(e,t,r){const n=e[t],s=e[r];if(n!==s)return s-n;const i=Pn.indexOf(t),o=Pn.indexOf(r);return i!==o?i-o:t.localeCompare(r)}(s,e,t))}function Sn(e){var t,r;const{children:n}=e,s=null!=(t=e.markDefs)?t:[];if(!n||!n.length)return[];const i=n.map(An),o={_type:"@span",children:[],markType:"<unknown>"};let a=[o];for(let c=0;c<n.length;c++){const e=n[c];if(!e)continue;const t=i[c]||[];let o=1;if(a.length>1)for(;o<a.length;o++){const e=(null==(r=a[o])?void 0:r.markKey)||"",n=t.indexOf(e);if(-1===n)break;t.splice(n,1)}a=a.slice(0,o);let u=a[a.length-1];if(u){for(const r of t){const t=null==s?void 0:s.find(e=>e._key===r),n=t?t._type:r,i={_type:"@span",_key:e._key,children:[],markDef:t,markType:n,markKey:r};u.children.push(i),a.push(i),u=i}if(jn(e)){const t=e.text.split("\n");for(let e=t.length;e-- >1;)t.splice(e,0,"\n");u.children=u.children.concat(t.map(e=>({_type:"@text",text:e})))}else u.children=u.children.concat(e)}}return o.children}function Tn(e,t){const r=[];let n;for(let s=0;s<e.length;s++){const i=e[s];if(i){if(!_n(i)){r.push(i),n=void 0;continue}if(!n){n=Cn(i,s,t),r.push(n);continue}if(Dn(i,n)){n.children.push(i);continue}if((i.level||1)>n.level){const e=Cn(i,s,t);if("html"===t){const t=n.children[n.children.length-1],r=$n($n({},t),{},{children:[...t.children,e]});n.children[n.children.length-1]=r}else n.children.push(e);n=e;continue}if((i.level||1)<n.level){const e=r[r.length-1],o=e&&qn(e,i);if(o){n=o,n.children.push(i);continue}n=Cn(i,s,t),r.push(n);continue}if(i.listItem!==n.listItem){const e=r[r.length-1],o=e&&qn(e,{level:i.level||1});if(o&&o.listItem===i.listItem){n=o,n.children.push(i);continue}n=Cn(i,s,t),r.push(n);continue}r.push(i)}}return r}function Dn(e,t){return(e.level||1)===t.level&&e.listItem===t.listItem}function Cn(e,t,r){return{_type:"@list",_key:`${e._key||`${t}`}-parent`,mode:r,level:e.level||1,listItem:e.listItem,children:[e]}}function qn(e,t){const r=t.level||1,n=t.listItem||"normal",s="string"==typeof t.listItem;if(xn(e)&&(e.level||1)===r&&s&&(e.listItem||"normal")===n)return e;if(!("children"in e))return;const i=e.children[e.children.length-1];return i&&!jn(i)?qn(i,t):void 0}function Un(e){let t="";return e.children.forEach(e=>{Mn(e)?t+=e.text:kn(e)&&(t+=Un(e))}),t}const Wn="html";export{Wn as L,be as _,_n as a,kn as b,On as c,Mn as d,Sn as e,ye as f,me as g,Br as h,xn as i,Qr as j,Tn as n,Un as s};
